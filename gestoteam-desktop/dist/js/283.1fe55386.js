"use strict";(self["webpackChunkgestoteam_frontend"]=self["webpackChunkgestoteam_frontend"]||[]).push([[283],{9667:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var s=a(6768),o=a(4232);const i={class:"team-matches-page"},r={key:0};function l(t,e,a,l,n,d){const c=(0,s.g2)("BaseButton"),m=(0,s.g2)("PageHeader"),u=(0,s.g2)("LoadingSpinner"),h=(0,s.g2)("EmptyState"),g=(0,s.g2)("DataTable");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(m,{title:n.teamName||"Partidos","show-back-button":"",onBack:d.goBack},{default:(0,s.k6)((()=>[n.matches&&n.matches.length>0?((0,s.uX)(),(0,s.Wv)(c,{key:0,onClick:d.goToAddMatch},{default:(0,s.k6)((()=>e[0]||(e[0]=[(0,s.Lk)("i",{class:"fa-solid fa-plus"},null,-1),(0,s.eW)(" Añadir Partido ")]))),_:1},8,["onClick"])):(0,s.Q3)("",!0)])),_:1},8,["title","onBack"]),n.loading?((0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(u,{message:"Cargando partidos..."})])):n.matches&&0!==n.matches.length?((0,s.uX)(),(0,s.Wv)(g,{key:2,items:n.matches,columns:n.columns,"default-sort-key":"date","default-sort-asc":!1,onRowClick:d.viewMatchDetails},{"cell-opponent":(0,s.k6)((({item:t})=>[(0,s.eW)((0,o.v_)(t.opponent),1)])),"cell-result":(0,s.k6)((({item:t})=>[(0,s.Lk)("span",{class:(0,o.C4)(["match-result",d.getResultClass(t)])},(0,o.v_)(d.formatResult(t)),3)])),"cell-date":(0,s.k6)((({item:t})=>[(0,s.eW)((0,o.v_)(d.formatDate(t.date)),1)])),_:1},8,["items","columns","onRowClick"])):((0,s.uX)(),(0,s.Wv)(h,{key:1,title:"No hay partidos registrados",message:"Registra tu primer partido para llevar un seguimiento de la temporada.",icon:"fa-solid fa-calendar-plus"},{actions:(0,s.k6)((()=>[(0,s.bF)(c,{onClick:d.goToAddMatch},{default:(0,s.k6)((()=>e[1]||(e[1]=[(0,s.Lk)("i",{class:"fa-solid fa-plus"},null,-1),(0,s.eW)(" Añadir primer partido ")]))),_:1},8,["onClick"])])),_:1}))])}a(4114);var n=a(4300),d=a(8812),c=a(5951),m=a(8850),u=a(9302),h=a(874),g={components:{DataTable:d.A,PageHeader:c.A,BaseButton:m.A,EmptyState:u.A,LoadingSpinner:h.A},data(){return{teamId:this.$route.params.id,teamName:"",matches:[],loading:!0,columns:[{key:"date",label:"Fecha",sortable:!0},{key:"opponent",label:"Rival",sortable:!0},{key:"result",label:"Resultado",sortable:!1},{key:"location",label:"Ubicación",sortable:!0}]}},methods:{async fetchMatches(){this.loading=!0;try{const[t,e]=await Promise.all([n.A.get(`/teams/${this.teamId}`),n.A.get(`/matches/team/${this.teamId}`)]);this.teamName=t.data.name,this.matches=Array.isArray(e.data)?e.data:[]}catch(t){console.error("Error al cargar los partidos:",t),this.matches=[]}finally{this.loading=!1}},formatResult(t){return t.result||"Pendiente"},getResultClass(t){if(!t.finalized)return"pending";if(t.won)return"win";if(t.result){const e=t.result.split("-");if(2===e.length&&e[0]===e[1])return"draw"}return"loss"},formatDate(t){if(!t)return"";const e={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(t).toLocaleDateString("es-ES",e)},viewMatchDetails(t){this.$router.push({name:"MatchDetails",params:{id:t.id}})},goToAddMatch(){this.$router.push({name:"AddMatch",params:{teamId:this.teamId}})},goBack(){this.$router.push({name:"TeamDetails",params:{id:this.teamId}})}},mounted(){this.fetchMatches()}},p=a(1241);const k=(0,p.A)(g,[["render",l],["__scopeId","data-v-7ee529ec"]]);var f=k}}]);
//# sourceMappingURL=283.1fe55386.js.map