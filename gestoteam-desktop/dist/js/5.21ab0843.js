"use strict";(self["webpackChunkgestoteam_frontend"]=self["webpackChunkgestoteam_frontend"]||[]).push([[5],{8850:function(e,a,t){t.d(a,{A:function(){return c}});var r=t(6768),l=t(4232);const s=["type","disabled"],o={key:0,class:"spinner"},i={class:"content"};function d(e,a,t,d,n,u){return(0,r.uX)(),(0,r.CE)("button",{type:t.type,class:(0,l.C4)(u.buttonClass),disabled:t.disabled||t.loading},[t.loading?((0,r.uX)(),(0,r.CE)("span",o)):(0,r.Q3)("",!0),t.icon&&!t.loading?((0,r.uX)(),(0,r.CE)("i",{key:1,class:(0,l.C4)(["icon",t.icon])},null,2)):(0,r.Q3)("",!0),(0,r.Lk)("span",i,[(0,r.RG)(e.$slots,"default",{},void 0,!0)])],10,s)}var n={name:"BaseButton",props:{type:{type:String,default:"button"},variant:{type:String,default:"primary"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},icon:{type:String,default:""}},computed:{buttonClass(){return["btn",`btn-${this.variant}`,{loading:this.loading}]}}},u=t(1241);const p=(0,u.A)(n,[["render",d],["__scopeId","data-v-fac128cc"]]);var c=p},2964:function(e,a,t){t.d(a,{A:function(){return y}});var r=t(6768),l=t(4232);const s={class:"base-card"},o={key:0,class:"card-header"},i={key:0,class:"card-title"},d={class:"card-actions"},n={class:"card-content"};function u(e,a,t,u,p,c){return(0,r.uX)(),(0,r.CE)("div",s,[t.title||e.$slots.header?((0,r.uX)(),(0,r.CE)("div",o,[t.title?((0,r.uX)(),(0,r.CE)("h3",i,(0,l.v_)(t.title),1)):(0,r.Q3)("",!0),(0,r.Lk)("div",d,[(0,r.RG)(e.$slots,"header",{},void 0,!0)])])):(0,r.Q3)("",!0),(0,r.Lk)("div",n,[(0,r.RG)(e.$slots,"default",{},void 0,!0)])])}var p={name:"BaseCard",props:{title:{type:String,default:""}}},c=t(1241);const m=(0,c.A)(p,[["render",u],["__scopeId","data-v-40ece3e8"]]);var y=m},4583:function(e,a,t){t.d(a,{A:function(){return m}});var r=t(6768),l=t(4232);const s={class:"form-group"},o=["for"],i=["id","type","value","placeholder","required","disabled"],d={key:1,class:"error-message"};function n(e,a,t,n,u,p){return(0,r.uX)(),(0,r.CE)("div",s,[t.label?((0,r.uX)(),(0,r.CE)("label",{key:0,for:t.id},(0,l.v_)(t.label),9,o)):(0,r.Q3)("",!0),(0,r.Lk)("input",{id:t.id,type:t.type,value:t.modelValue,onInput:a[0]||(a[0]=a=>e.$emit("update:modelValue",a.target.value)),placeholder:t.placeholder,required:t.required,disabled:t.disabled,class:(0,l.C4)(["base-input",{"has-error":t.error}])},null,42,i),t.error?((0,r.uX)(),(0,r.CE)("p",d,(0,l.v_)(t.error),1)):(0,r.Q3)("",!0)])}var u={name:"BaseInput",props:{modelValue:{type:[String,Number],default:""},label:{type:String,default:""},id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},type:{type:String,default:"text"},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:modelValue"]},p=t(1241);const c=(0,p.A)(u,[["render",n],["__scopeId","data-v-1cceb5aa"]]);var m=c},4952:function(e,a,t){t.d(a,{A:function(){return b}});var r=t(6768),l=t(4232);const s={class:"form-group"},o=["for"],i=["id","value","disabled"],d={key:0,disabled:"",value:""},n=["value"],u={key:1,class:"error-message"};function p(e,a,t,p,c,m){return(0,r.uX)(),(0,r.CE)("div",s,[t.label?((0,r.uX)(),(0,r.CE)("label",{key:0,for:t.id},(0,l.v_)(t.label),9,o)):(0,r.Q3)("",!0),(0,r.Lk)("select",{id:t.id,value:t.modelValue,onChange:a[0]||(a[0]=a=>e.$emit("update:modelValue",a.target.value)),disabled:t.disabled,class:(0,l.C4)(["base-select",{"has-error":t.error}])},[t.placeholder?((0,r.uX)(),(0,r.CE)("option",d,(0,l.v_)(t.placeholder),1)):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.options,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.value,value:e.value},(0,l.v_)(e.text),9,n)))),128))],42,i),t.error?((0,r.uX)(),(0,r.CE)("p",u,(0,l.v_)(t.error),1)):(0,r.Q3)("",!0)])}var c={name:"BaseSelect",props:{modelValue:{type:[String,Number],default:""},label:{type:String,default:""},id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},options:{type:Array,required:!0},placeholder:{type:String,default:"Selecciona una opción"},disabled:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:modelValue"]},m=t(1241);const y=(0,m.A)(c,[["render",p],["__scopeId","data-v-537a3e9c"]]);var b=y},5951:function(e,a,t){t.d(a,{A:function(){return m}});var r=t(6768),l=t(4232);const s={class:"page-header"},o={class:"header-main"},i={class:"page-title"},d={class:"header-actions"};function n(e,a,t,n,u,p){return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.Lk)("div",o,[t.showBackButton?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"back-button",onClick:a[0]||(a[0]=a=>e.$emit("back"))},a[1]||(a[1]=[(0,r.Lk)("i",{class:"fa-solid fa-arrow-left"},null,-1),(0,r.Lk)("span",{class:"back-button-text"},"Volver",-1)]))):(0,r.Q3)("",!0),(0,r.Lk)("h2",i,(0,l.v_)(t.title),1)]),(0,r.Lk)("div",d,[(0,r.RG)(e.$slots,"default",{},void 0,!0)])])}var u={name:"PageHeader",props:{title:{type:String,required:!0},showBackButton:{type:Boolean,default:!1}},emits:["back"]},p=t(1241);const c=(0,p.A)(u,[["render",n],["__scopeId","data-v-2a28e4d4"]]);var m=c},1005:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var r=t(6768),l=t(5130),s=t(4232);const o={class:"form-page-container"},i={class:"form-grid"},d={class:"form-actions"};function n(e,a,t,n,u,p){const c=(0,r.g2)("PageHeader"),m=(0,r.g2)("BaseInput"),y=(0,r.g2)("BaseSelect"),b=(0,r.g2)("BaseButton"),h=(0,r.g2)("BaseCard");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.bF)(c,{title:u.isEditMode?"Editar Jugador":"Añadir Jugador","show-back-button":"",onBack:p.goBack},null,8,["title","onBack"]),(0,r.bF)(h,null,{default:(0,r.k6)((()=>[(0,r.Lk)("form",{onSubmit:a[7]||(a[7]=(0,l.D$)(((...e)=>p.submitForm&&p.submitForm(...e)),["prevent"]))},[(0,r.Lk)("div",i,[(0,r.bF)(m,{modelValue:u.player.name,"onUpdate:modelValue":a[0]||(a[0]=e=>u.player.name=e),label:"Nombre",id:"name",required:""},null,8,["modelValue"]),(0,r.bF)(m,{modelValue:u.player.surnameFirst,"onUpdate:modelValue":a[1]||(a[1]=e=>u.player.surnameFirst=e),label:"Primer Apellido",id:"surnameFirst",required:""},null,8,["modelValue"]),(0,r.bF)(m,{modelValue:u.player.surnameSecond,"onUpdate:modelValue":a[2]||(a[2]=e=>u.player.surnameSecond=e),label:"Segundo Apellido",id:"surnameSecond"},null,8,["modelValue"]),(0,r.bF)(m,{modelValue:u.player.birthDate,"onUpdate:modelValue":a[3]||(a[3]=e=>u.player.birthDate=e),label:"Fecha de Nacimiento",id:"birthDate",type:"date",required:""},null,8,["modelValue"]),(0,r.bF)(m,{modelValue:u.player.number,"onUpdate:modelValue":a[4]||(a[4]=e=>u.player.number=e),modelModifiers:{number:!0},label:"Dorsal",id:"number",type:"number",min:"1",max:"99",required:""},null,8,["modelValue"]),(0,r.bF)(y,{modelValue:u.player.position,"onUpdate:modelValue":a[5]||(a[5]=e=>u.player.position=e),label:"Posición",id:"position",options:p.positionOptions,required:""},null,8,["modelValue","options"]),(0,r.bF)(y,{modelValue:u.player.status,"onUpdate:modelValue":a[6]||(a[6]=e=>u.player.status=e),label:"Estado",id:"status",options:p.statusOptions,required:""},null,8,["modelValue","options"])]),(0,r.Lk)("div",d,[(0,r.bF)(b,{type:"submit",loading:u.isSaving,variant:"primary"},{default:(0,r.k6)((()=>[(0,r.eW)((0,s.v_)(u.isSaving?"Guardando...":u.isEditMode?"Guardar Cambios":"Guardar Jugador"),1)])),_:1},8,["loading"])])],32)])),_:1})])}t(4114),t(1454);var u=t(4710),p=t(4300),c=t(5951),m=t(2964),y=t(4583),b=t(4952),h=t(8850),v={components:{PageHeader:c.A,BaseCard:m.A,BaseInput:y.A,BaseSelect:b.A,BaseButton:h.A},data(){return{player:{name:"",surnameFirst:"",surnameSecond:"",birthDate:null,number:null,position:"",status:"",teamId:this.$route.params.teamId},positions:[],statuses:[],isEditMode:!1,isSaving:!1}},computed:{positionOptions(){return this.positions.map((e=>({value:e.code,text:e.description})))},statusOptions(){return this.statuses.map((e=>({value:e.code,text:e.description})))}},methods:{async fetchEnums(){try{const[e,a]=await Promise.all([p.A.get("/enums/positions"),p.A.get("/enums/player-status")]);this.positions=e.data,this.statuses=a.data}catch(e){u.l.showError("Error al cargar las opciones del formulario.")}},async fetchPlayer(){try{const e=this.$route.params.id,a=await p.A.get(`/players/${e}`);this.player=a.data}catch(e){u.l.showError("Error al cargar los datos del jugador.")}},async submitForm(){this.isSaving=!0;try{this.isEditMode?(await p.A.put(`/players/${this.player.id}`,this.player),u.l.showSuccess("Jugador actualizado con éxito"),this.$router.push({name:"PlayerDetails",params:{id:this.player.id}})):(await p.A.post("/players",this.player),u.l.showSuccess("Jugador añadido con éxito"),this.$router.push({name:"TeamPlayers",params:{id:this.player.teamId}}))}catch(e){}finally{this.isSaving=!1}},goBack(){const e=this.isEditMode?this.player.team.id:this.$route.params.teamId;this.$router.push({name:"TeamPlayers",params:{id:e}})}},created(){this.isEditMode=!!this.$route.params.id,this.fetchEnums(),this.isEditMode&&this.fetchPlayer()}},f=t(1241);const g=(0,f.A)(v,[["render",n],["__scopeId","data-v-a28bc4b6"]]);var k=g}}]);
//# sourceMappingURL=5.21ab0843.js.map