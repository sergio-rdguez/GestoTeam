"use strict";(self["webpackChunkgestoteam_frontend"]=self["webpackChunkgestoteam_frontend"]||[]).push([[307],{8850:function(e,a,t){t.d(a,{A:function(){return p}});var l=t(6768),o=t(4232);const n=["type","disabled"],r={key:0,class:"spinner"},d={class:"content"};function s(e,a,t,s,i,u){return(0,l.uX)(),(0,l.CE)("button",{type:t.type,class:(0,o.C4)(u.buttonClass),disabled:t.disabled||t.loading},[t.loading?((0,l.uX)(),(0,l.CE)("span",r)):(0,l.Q3)("",!0),t.icon&&!t.loading?((0,l.uX)(),(0,l.CE)("i",{key:1,class:(0,o.C4)(["icon",t.icon])},null,2)):(0,l.Q3)("",!0),(0,l.Lk)("span",d,[(0,l.RG)(e.$slots,"default",{},void 0,!0)])],10,n)}var i={name:"BaseButton",props:{type:{type:String,default:"button"},variant:{type:String,default:"primary"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},icon:{type:String,default:""}},computed:{buttonClass(){return["btn",`btn-${this.variant}`,{loading:this.loading}]}}},u=t(1241);const c=(0,u.A)(i,[["render",s],["__scopeId","data-v-fac128cc"]]);var p=c},2964:function(e,a,t){t.d(a,{A:function(){return m}});var l=t(6768),o=t(4232);const n={class:"base-card"},r={key:0,class:"card-header"},d={key:0,class:"card-title"},s={class:"card-actions"},i={class:"card-content"};function u(e,a,t,u,c,p){return(0,l.uX)(),(0,l.CE)("div",n,[t.title||e.$slots.header?((0,l.uX)(),(0,l.CE)("div",r,[t.title?((0,l.uX)(),(0,l.CE)("h3",d,(0,o.v_)(t.title),1)):(0,l.Q3)("",!0),(0,l.Lk)("div",s,[(0,l.RG)(e.$slots,"header",{},void 0,!0)])])):(0,l.Q3)("",!0),(0,l.Lk)("div",i,[(0,l.RG)(e.$slots,"default",{},void 0,!0)])])}var c={name:"BaseCard",props:{title:{type:String,default:""}}},p=t(1241);const v=(0,p.A)(c,[["render",u],["__scopeId","data-v-40ece3e8"]]);var m=v},3318:function(e,a,t){t.d(a,{A:function(){return p}});var l=t(6768),o=t(4232);const n={class:"form-group-checkbox"},r=["id","checked","disabled"],d=["for"];function s(e,a,t,s,i,u){return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("input",{id:t.id,type:"checkbox",checked:t.modelValue,onChange:a[0]||(a[0]=a=>e.$emit("update:modelValue",a.target.checked)),disabled:t.disabled,class:"base-checkbox"},null,40,r),t.label?((0,l.uX)(),(0,l.CE)("label",{key:0,for:t.id},(0,o.v_)(t.label),9,d)):(0,l.Q3)("",!0)])}var i={name:"BaseCheckbox",props:{modelValue:{type:Boolean,default:!1},label:{type:String,default:""},id:{type:String,default:()=>`checkbox-${Math.random().toString(36).substr(2,9)}`},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"]},u=t(1241);const c=(0,u.A)(i,[["render",s],["__scopeId","data-v-5dabed5f"]]);var p=c},4583:function(e,a,t){t.d(a,{A:function(){return v}});var l=t(6768),o=t(4232);const n={class:"form-group"},r=["for"],d=["id","type","value","placeholder","required","disabled"],s={key:1,class:"error-message"};function i(e,a,t,i,u,c){return(0,l.uX)(),(0,l.CE)("div",n,[t.label?((0,l.uX)(),(0,l.CE)("label",{key:0,for:t.id},(0,o.v_)(t.label),9,r)):(0,l.Q3)("",!0),(0,l.Lk)("input",{id:t.id,type:t.type,value:t.modelValue,onInput:a[0]||(a[0]=a=>e.$emit("update:modelValue",a.target.value)),placeholder:t.placeholder,required:t.required,disabled:t.disabled,class:(0,o.C4)(["base-input",{"has-error":t.error}])},null,42,d),t.error?((0,l.uX)(),(0,l.CE)("p",s,(0,o.v_)(t.error),1)):(0,l.Q3)("",!0)])}var u={name:"BaseInput",props:{modelValue:{type:[String,Number],default:""},label:{type:String,default:""},id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},type:{type:String,default:"text"},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:modelValue"]},c=t(1241);const p=(0,c.A)(u,[["render",i],["__scopeId","data-v-1cceb5aa"]]);var v=p},4952:function(e,a,t){t.d(a,{A:function(){return f}});var l=t(6768),o=t(4232);const n={class:"form-group"},r=["for"],d=["id","value","disabled"],s={key:0,disabled:"",value:""},i=["value"],u={key:1,class:"error-message"};function c(e,a,t,c,p,v){return(0,l.uX)(),(0,l.CE)("div",n,[t.label?((0,l.uX)(),(0,l.CE)("label",{key:0,for:t.id},(0,o.v_)(t.label),9,r)):(0,l.Q3)("",!0),(0,l.Lk)("select",{id:t.id,value:t.modelValue,onChange:a[0]||(a[0]=a=>e.$emit("update:modelValue",a.target.value)),disabled:t.disabled,class:(0,o.C4)(["base-select",{"has-error":t.error}])},[t.placeholder?((0,l.uX)(),(0,l.CE)("option",s,(0,o.v_)(t.placeholder),1)):(0,l.Q3)("",!0),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.options,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.value,value:e.value},(0,o.v_)(e.text),9,i)))),128))],42,d),t.error?((0,l.uX)(),(0,l.CE)("p",u,(0,o.v_)(t.error),1)):(0,l.Q3)("",!0)])}var p={name:"BaseSelect",props:{modelValue:{type:[String,Number],default:""},label:{type:String,default:""},id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},options:{type:Array,required:!0},placeholder:{type:String,default:"Selecciona una opción"},disabled:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["update:modelValue"]},v=t(1241);const m=(0,v.A)(p,[["render",c],["__scopeId","data-v-537a3e9c"]]);var f=m},874:function(e,a,t){t.d(a,{A:function(){return c}});var l=t(6768),o=t(4232);const n={class:"loading-container"},r={key:0,class:"loading-message"};function d(e,a,t,d,s,i){return(0,l.uX)(),(0,l.CE)("div",n,[a[0]||(a[0]=(0,l.Lk)("div",{class:"spinner"},null,-1)),t.message?((0,l.uX)(),(0,l.CE)("p",r,(0,o.v_)(t.message),1)):(0,l.Q3)("",!0)])}var s={name:"LoadingSpinner",props:{message:{type:String,default:""},size:{type:String,default:"md"}}},i=t(1241);const u=(0,i.A)(s,[["render",d],["__scopeId","data-v-5053b748"]]);var c=u},5951:function(e,a,t){t.d(a,{A:function(){return v}});var l=t(6768),o=t(4232);const n={class:"page-header"},r={class:"header-main"},d={class:"page-title"},s={class:"header-actions"};function i(e,a,t,i,u,c){return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",r,[t.showBackButton?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"back-button",onClick:a[0]||(a[0]=a=>e.$emit("back"))},a[1]||(a[1]=[(0,l.Lk)("i",{class:"fa-solid fa-arrow-left"},null,-1),(0,l.Lk)("span",{class:"back-button-text"},"Volver",-1)]))):(0,l.Q3)("",!0),(0,l.Lk)("h2",d,(0,o.v_)(t.title),1)]),(0,l.Lk)("div",s,[(0,l.RG)(e.$slots,"default",{},void 0,!0)])])}var u={name:"PageHeader",props:{title:{type:String,required:!0},showBackButton:{type:Boolean,default:!1}},emits:["back"]},c=t(1241);const p=(0,c.A)(u,[["render",i],["__scopeId","data-v-2a28e4d4"]]);var v=p},1307:function(e,a,t){t.r(a),t.d(a,{default:function(){return X}});t(4114),t(1454);var l=t(6768),o=t(5130),n=t(4232),r=t(144),d=t(1387),s=t(4300),i=t(4710),u=t(5951),c=t(2964),p=t(4583),v=t(4952),m=t(8850),f=t(3318),g=t(874);const b={class:"form-page-container"},y={key:0,class:"loading-container"},k={class:"form-grid"},h={key:0,class:"form-grid-span-2 result-section"},C={key:0,class:"result-inputs"},A={key:1,class:"result-info-text"},S={class:"form-actions"};var E={__name:"MatchForm",setup(e){const a=(0,d.lq)(),t=(0,d.rd)(),E=a.params.teamId,_=a.params.id,V=(0,l.EW)((()=>!!_)),X=(0,r.KR)(!0),F=(0,r.KR)(!1),I=(0,r.KR)({opponentId:"",date:"",location:"",finalized:!1,goalsFor:null,goalsAgainst:null}),B=(0,r.KR)([]),w=(0,l.EW)((()=>B.value.map((e=>({value:e.id,text:e.name}))))),L=e=>{if(!e)return"";const a=new Date(e);return a.setMinutes(a.getMinutes()-a.getTimezoneOffset()),a.toISOString().slice(0,16)},$=async()=>{try{const e=await s.A.get(`/opponents/team/${E}`);B.value=e.data}catch(e){i.l.showError("No se pudieron cargar los rivales.")}},Q=async()=>{try{const e=await s.A.get(`/matches/details/${_}`),a=e.data;I.value={opponentId:a.opponentId,date:L(a.date),location:a.location,finalized:a.finalized,goalsFor:a.goalsFor??null,goalsAgainst:a.goalsAgainst??null}}catch(e){i.l.showError("Error al cargar los datos del partido."),z()}},x=async()=>{F.value=!0;try{const e={...I.value,date:new Date(I.value.date).toISOString()};e.finalized||(e.goalsFor=null,e.goalsAgainst=null),V.value?(await s.A.put(`/matches/${_}`,e),i.l.showSuccess("Partido actualizado con éxito.")):(e.teamId=E,await s.A.post("/matches",e),i.l.showSuccess("Partido creado con éxito.")),z()}catch(e){}finally{F.value=!1}},z=()=>{t.push({name:"TeamMatches",params:{id:E}})};return(0,l.sV)((async()=>{X.value=!0,await $(),V.value&&await Q(),X.value=!1})),(e,a)=>((0,l.uX)(),(0,l.CE)("div",b,[(0,l.bF)(u.A,{title:V.value?"Editar Partido":"Añadir Partido","show-back-button":"",onBack:z},null,8,["title"]),X.value?((0,l.uX)(),(0,l.CE)("div",y,[(0,l.bF)(g.A,{message:"Cargando datos del partido..."})])):((0,l.uX)(),(0,l.Wv)(c.A,{key:1},{default:(0,l.k6)((()=>[(0,l.Lk)("form",{onSubmit:(0,o.D$)(x,["prevent"])},[(0,l.Lk)("div",k,[(0,l.bF)(v.A,{modelValue:I.value.opponentId,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value.opponentId=e),label:"Rival",id:"opponent",options:w.value,placeholder:"Selecciona un rival",required:"",class:"form-grid-span-2"},null,8,["modelValue","options"]),(0,l.bF)(p.A,{modelValue:I.value.date,"onUpdate:modelValue":a[1]||(a[1]=e=>I.value.date=e),label:"Fecha y Hora",id:"date",type:"datetime-local",required:""},null,8,["modelValue"]),(0,l.bF)(p.A,{modelValue:I.value.location,"onUpdate:modelValue":a[2]||(a[2]=e=>I.value.location=e),label:"Lugar del Partido",id:"location",placeholder:"Ej: Ciudad Deportiva GestoTeam",required:""},null,8,["modelValue"]),V.value?((0,l.uX)(),(0,l.CE)("div",h,[(0,l.bF)(f.A,{modelValue:I.value.finalized,"onUpdate:modelValue":a[3]||(a[3]=e=>I.value.finalized=e),label:"Partido Finalizado",id:"finalized"},null,8,["modelValue"]),I.value.finalized?((0,l.uX)(),(0,l.CE)("div",C,[(0,l.bF)(p.A,{modelValue:I.value.goalsFor,"onUpdate:modelValue":a[4]||(a[4]=e=>I.value.goalsFor=e),modelModifiers:{number:!0},label:"Goles a Favor",id:"goalsFor",type:"number",min:"0"},null,8,["modelValue"]),(0,l.bF)(p.A,{modelValue:I.value.goalsAgainst,"onUpdate:modelValue":a[5]||(a[5]=e=>I.value.goalsAgainst=e),modelModifiers:{number:!0},label:"Goles en Contra",id:"goalsAgainst",type:"number",min:"0"},null,8,["modelValue"])])):((0,l.uX)(),(0,l.CE)("p",A," Marca la casilla para poder registrar el resultado. "))])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",S,[(0,l.bF)(m.A,{type:"submit",loading:F.value,variant:"primary"},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(F.value?"Guardando...":V.value?"Guardar Cambios":"Crear Partido"),1)])),_:1},8,["loading"])])],32)])),_:1}))]))}},_=t(1241);const V=(0,_.A)(E,[["__scopeId","data-v-88173db0"]]);var X=V}}]);
//# sourceMappingURL=307.5beeab94.js.map